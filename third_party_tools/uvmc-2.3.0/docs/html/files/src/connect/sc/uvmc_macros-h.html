<html><head><title>SC Macros</title><link rel="stylesheet" type="text/css" href="../../../../styles/main.css"><script language=JavaScript src="../../../../javascript/main.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 01-12-2008 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org --> 








 <!--TOP - START OF CONTENT-->
<div id=Content>


 <!--CONTENT index=0 -->
<div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="SC_Macros" href="../../../../uvmc/src/connect/sc/uvmc_macros.h">SC Macros</a></h1><div class=CBody><p>UVMC defines simple convenience macros for generating converter definitions and output stream operator (<i>operator&lt;&lt;(ostream&amp;)</i>) so that you may use <i>cout</i> to print the contents of your SC transactions.&nbsp; These macros do not present any performance or debug difficulties beyond the very nature of their being macros.&nbsp; The code they expand into would be identical to code you would write yourself.</p><p>These macros are completely optional.&nbsp; You are encouraged to learn how to write converters and operator&lt;&lt;, perhaps using the macro definitions as templates to get you started.</p>

<!--START_ND_SUMMARY index=0-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=0 -->

<tr class="SMain"><td colspan=2 class=SEntry><a href="#SC_Macros" >SC Macros</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>UVMC defines simple convenience macros for generating converter definitions and output stream operator (<i>operator&lt;&lt;(ostream&amp;)</i>) so that you may use <i>cout</i> to print the contents of your SC transactions. </td></tr>
  <!-- index=1 -->

<tr class="SGeneric SIndent1 SMarked"><td class=SEntry><a href="#UVMC_CONVERT" >UVMC_CONVERT</a></td><td class=SDescription>Generate a converter specialization of <i>uvmc_convert&lt;T&gt;</i> for the given transaction <i>TYPE</i>.</td></tr>
  <!-- index=2 -->

<tr class="SGeneric SIndent1"><td class=SEntry><a href="#UVMC_PRINT" >UVMC_PRINT</a></td><td class=SDescription>Generate an <i>operator&lt;&lt;(ostream&amp;)</i> implementation for use with <i>cout</i> and other output streams for the given transaction <i>TYPE</i>.</td></tr>
  <!-- index=3 -->

<tr class="SGeneric SIndent1 SMarked"><td class=SEntry><a href="#UVMC_UTILS" >UVMC_UTILS</a></td><td class=SDescription>Generate both a converter specialization and output stream <i>operator&lt;&lt;</i> for the given transaction <i>TYPE</i>.</td></tr></table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=1 -->
<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="UVMC_CONVERT" href="../../../../uvmc/src/connect/sc/uvmc_macros.h">UVMC_CONVERT</a></h3><div class=CBody><p>Generate a converter specialization of <i>uvmc_convert&lt;T&gt;</i> for the given transaction <i>TYPE</i>.</p><blockquote><pre>UVMC_CONVERT_N (TYPE, &lt;list of N variables&gt; )
UVMC_CONVERT_EXT_N (TYPE, BASE, &lt;list of N variables&gt; )</pre></blockquote><p>For the second form, the generated converter will pack/unpack the members in the provided <i>BASE</i> class before those in <i>TYPE</i>.</p><p>Invoke the macro whose numeric suffix equals the number of field members you wish to include in the pack, unpack, and print operations.&nbsp; These must all appear in the list of macro arguments in the order you want them streamed.</p><h4 class=CHeading>Example</h4><blockquote><pre>UVMC_CONVERT_3( bus_trans, cmd, addr, data)
UVMC_CONVERT_EXT_1 (bus_error, bus_trans, crc)</pre></blockquote><p>The first macro generates a converter for the <i>bus_trans</i> class.&nbsp; Three member variables of <i>bus_trans</i> are included in the pack and unpack operations, in the order given: <i>cmd</i>, <i>addr</i>, and <i>data</i>.&nbsp; If there were other members in <i>bus_trans</i>, they will not be included in the converter implementations.</p><p>The second macro generates a converter and <i>operator&lt;&lt;</i> for the <i>bus_error</i> class.&nbsp; Packing, unpacking, and output streaming for the base type, <i>bus_trans</i> is performed first, followed by the <i>crc</i> field in <i>bus_error</i>.</p><p>The macros above generate the following code</p><blockquote><pre>template &lt;&gt;
class uvmc_converter&lt;bus_trans&gt; {
  public:
  static void do_pack(const bus_trans &amp;t, uvmc_packer &amp;packer) {
    packer &lt;&lt; cmd &lt;&lt; addr &lt;&lt; data;
  }
  static void do_unpack(bus_trans &amp;t, uvmc_packer &amp;packer) {
    packer &gt;&gt; cmd &gt;&gt; addr &gt;&gt; data;
  }
};</pre></blockquote><blockquote><pre>template &lt;&gt;
class uvmc_converter&lt;bus_error&gt; {
  public:
  static void do_pack(const bus_error &amp;t, uvmc_packer &amp;packer) {
    uvmc_converter&lt;base_trans&gt;::do_pack(t,packer);
    packer &lt;&lt; crc;
  }
  static void do_unpack(bus_error &amp;t, uvmc_packer &amp;packer) {
    uvmc_converter&lt;base_trans&gt;::do_unpack(t,packer);
    packer &gt;&gt; crc;
  }
};</pre></blockquote><h4 class=CHeading>Usage notes</h4><ul><li>The default converter delegates to <i>T.do_pack</i> and <i>T.do_unpack</i>.&nbsp; For transactions that do not possess these member functions (likely most), use one of these macros to generate a simple converter class that packs and unpacks your transaction from outside your transaction class.</li><li>All class members given in the list must be public members.</li><li>The <i>uvmc_packer</i> must provide <i>operator&gt;&gt;</i> and <i>operator&lt;&lt;</i> for all the types passed in the list.&nbsp; See <a href="../../../examples/field_types/README-txt.html#UVMC_Type_Support" class=LSection id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">UVMC Type Support</a> for a list of supported types.</li><li>These macros define a simple converter that does bit-by-bit packing and unpacking in the order provided.&nbsp; Any customized conversions would require you write your own converter.&nbsp;  See <a href="../../../examples/converters/README-txt.html#Converter_Specialization" class=LGeneric id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">Converter Specialization</a> for details.</li><li>The macros support up to 20 member variables, i.e. up through UVM_UTILS_20 and UVM_UTILS_EXT_20.</li></ul></div></div></div>




 <!--CONTENT index=2 -->
<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="UVMC_PRINT" href="../../../../uvmc/src/connect/sc/uvmc_macros.h">UVMC_PRINT</a></h3><div class=CBody><p>Generate an <i>operator&lt;&lt;(ostream&amp;)</i> implementation for use with <i>cout</i> and other output streams for the given transaction <i>TYPE</i>.</p><blockquote><pre>UVMC_PRINT_&lt;N&gt; (TYPE, &lt;list of N variables&gt; )
UVMC_PRINT_EXT_&lt;N&gt; (TYPE, BASE, &lt;list of N variables&gt; )</pre></blockquote><p>For the second form, the generated output stream operator will stream the contents of the provided <i>BASE</i> class before streaming those of <i>TYPE</i>.</p><p>Invoke the macro whose numeric suffix equals the number of field members you wish to include in the pack, unpack, and print operations.&nbsp; These must all appear in the list of macro arguments in the order you want them streamed.</p><h4 class=CHeading>Example</h4><blockquote><pre>UVMC_PRINT_3( bus_trans, cmd, addr, data)
UVMC_PRINT_EXT_1 (bus_error, bus_trans, crc)</pre></blockquote><p>The first macro generates an <i>operator&lt;&lt;</i> for the <i>bus_trans</i> class.&nbsp; Three member variables of <i>bus_trans</i> are included in the output stream operation, in the order given: cmd, addr, and data.&nbsp; If there were other members in <i>bus_trans</i>, they will not be included in the <i>operator&lt;&lt;</i> implementations.</p><p>The second macro generates an <i>operator&lt;&lt;</i> for the <i>bus_error</i> class.&nbsp; Output streaming for the base type, <i>bus_trans</i> is performed first, followed by the <i>crc</i> field in <i>bus_error</i>.</p><p>The macros above generate the following code</p><blockquote><pre>template &lt;&gt;
class uvmc_print&lt;bus_trans&gt; {
  public:
  static void do_print(const bus_trans&amp; t, ostream&amp; os=cout) {
    os &lt;&lt; hex &lt;&lt; &quot;cmd&quot;  &quot;:&quot; &lt;&lt; t.cmd &lt;&lt; &quot; &quot;
                 &quot;addr&quot; &quot;:&quot; &lt;&lt; t.addr &lt;&lt; &quot; &quot;
                 &quot;data&quot; &quot;:&quot; &lt;&lt; t.data &lt;&lt; dec;
  }
  static void print(const bus_trans&amp; t, ostream&amp; os=cout) {
    os &lt;&lt; &quot;'{&quot;;
    do_print(t,os);
    os &lt;&lt; &quot; }&quot;;
  }
};
ostream&amp; operator &lt;&lt; (ostream&amp; os, const bus_trans&amp; v) {
  uvmc_print&lt;bus_trans&gt;::print(v,os);
}</pre></blockquote><blockquote><pre>template &lt;&gt;
class uvmc_print&lt;bus_error&gt; {
  public:
  static void do_print(const bus_error&amp; t, ostream&amp; os=cout) {
    uvmc_print&lt;bus_trans&gt;::do_print(t,os);
    os &lt;&lt; &quot; &quot;;
    os &lt;&lt; hex &lt;&lt; &quot;crc&quot; &quot;:&quot; &lt;&lt; t.cmd &lt;&lt; &quot; &quot;
  }
  static void print(const bus_error&amp; t, ostream&amp; os=cout) {
    os &lt;&lt; &quot;'{&quot;;
    do_print(t,os);
    os &lt;&lt; &quot; }&quot;;
  }
};
ostream&amp; operator &lt;&lt; (ostream&amp; os, const bus_error&amp; v) {
  uvmc_print&lt;bus_error&gt;::print(v,os);
}</pre></blockquote><h4 class=CHeading>Usage notes</h4><ul><li>All class members given in the list must be public members</li><li>An <i>operator&lt;&lt;(ostream)</i> must be defined for each class member type listed.&nbsp; This is true for integral, string, and SystemC data types.&nbsp; UVMC also defines <i>operator&lt;&lt;(ostream&amp;)</i> for STL <i>vector&lt;T&gt;</i>, <i>map&lt;KEY,T&gt;</i>, and <i>list&lt;T&gt;</i> types.</li><li>The macros support up to 20 member variables, i.e.&nbsp; <i>UVM_UTILS_20</i> and <i>UVM_UTILS_EXT_20</i>.</li></ul><p>Before using these macros, be sure the <i>#include</i> the appropriate headers that define <i>ostream</i> and other I/O utilities.</p><blockquote><pre>#include &lt;iostream&gt;
#include &lt;iomanp&gt;</pre></blockquote></div></div></div>




 <!--CONTENT index=3 -->
<div class="CGeneric"><div class=CTopic><h3 class=CTitle><a name="UVMC_UTILS" href="../../../../uvmc/src/connect/sc/uvmc_macros.h">UVMC_UTILS</a></h3><div class=CBody><p>Generate both a converter specialization and output stream <i>operator&lt;&lt;</i> for the given transaction <i>TYPE</i>.</p><blockquote><pre>UVMC_UTILS_&lt;N&gt; (TYPE, &lt;list of N variables&gt; )
UVMC_UTILS_EXT_&lt;N&gt; (TYPE, BASE, &lt;list of N variables&gt; )</pre></blockquote><p>For the second form, the generated converter and output stream operator will perform the operation in <i>BASE</i> before doing the same in <i>TYPE</i>.</p><p>Invoke the macro whose numeric suffix equals the number of field members you wish to include in the pack, unpack, and print operations.</p><p>The <i>UVMC_UTILS</i> macro simply calls the corresponding <i>UVMC_CONVERT</i> and <i>UVMC_PRINT</i> macros.&nbsp; See <a href="#UVMC_CONVERT" class=LGeneric id=link3 onMouseOver="ShowTip(event, 'tt3', 'link3')" onMouseOut="HideTip('tt3')">UVMC_CONVERT</a> and <a href="#UVMC_PRINT" class=LGeneric id=link4 onMouseOver="ShowTip(event, 'tt4', 'link4')" onMouseOut="HideTip('tt4')">UVMC_PRINT</a> for detailed usage information.</p><h4 class=CHeading>Example</h4><blockquote><pre>UVMC_UTILS_3( bus_trans, cmd, addr, data)
UVMC_UTILS_EXT_1 (bus_error, bus_trans, crc)</pre></blockquote><p>The first macro generates converter and output stream implementions for <i>bus_trans</i>.&nbsp; Three member variables are included in the pack, unpack, and output stream operations, in the order given: <i>cmd</i>, <i>addr</i>, and <i>data</i>.&nbsp; If there were other members in <i>bus_trans</i>, they will not be included in the converter or <i>operator&lt;&lt;</i> implementations.</p><p>The second macro generates a converter and <i>operator&lt;&lt;</i> for the <i>bus_error</i> class.&nbsp; Packing, unpacking, and output streaming for the base type, <i>bus_trans</i> is performed first, followed by the <i>crc</i> field in <i>bus_error</i>.</p><p>The code that these macros expand into are provided in the descriptions of <a href="#UVMC_CONVERT" class=LGeneric id=link5 onMouseOver="ShowTip(event, 'tt3', 'link5')" onMouseOut="HideTip('tt3')">UVMC_CONVERT</a> and <a href="#UVMC_PRINT" class=LGeneric id=link6 onMouseOver="ShowTip(event, 'tt4', 'link6')" onMouseOut="HideTip('tt4')">UVMC_PRINT</a>.</p></div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CSection>The members of your transaction definitions may be any collection of the following types, which have direct support in UVMC. </div></div><div class=CToolTip id="tt2"><div class=CGeneric>Define a separate class for converting your transaction type.</div></div><div class=CToolTip id="tt3"><div class=CGeneric>Generate a converter specialization of <i>uvmc_convert&lt;T&gt;</i> for the given transaction <i>TYPE</i>.</div></div><div class=CToolTip id="tt4"><div class=CGeneric>Generate an <i>operator&lt;&lt;(ostream&amp;)</i> implementation for use with <i>cout</i> and other output streams for the given transaction <i>TYPE</i>.</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>