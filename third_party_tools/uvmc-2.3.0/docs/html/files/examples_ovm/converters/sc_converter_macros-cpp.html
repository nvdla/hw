<html><head><title>UVMC Converter Example - SC Converter Class, Macro-Generated</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 01-12-2008 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org --> 








 <!--TOP - START OF CONTENT-->
<div id=Content>


 <!--CONTENT index=0 -->
<div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="UVMC_Converter_Example-SC_Converter_Class,Macro-Generated" href="../../../uvmc/examples_ovm/converters/sc_converter_macros.cpp">UVMC Converter Example - SC Converter Class, Macro-Generated</a></h1><div class=CBody><p>This example demonstrates how to define an external converter for a transaction class using a <a href="../../src/connect/sc/uvmc_macros-h.html#UVMC_UTILS" class=LGeneric id=link3 onMouseOver="ShowTip(event, 'tt1', 'link3')" onMouseOut="HideTip('tt1')">UVMC_UTILS</a> macro.&nbsp; The macro expands into a template specialization of <i>uvmc_converter&lt;T&gt;</i> for your type <i>T</i>, overriding the default converter&rsquo;s implementation.&nbsp; An example showing how to write such a template specialization without the convenience macros can be found in <a href="../../examples/converters/sc_converter_class-cpp.html#UVMC_Converter_Example-SC_Converter_Class" class=LSection id=link4 onMouseOver="ShowTip(event, 'tt2', 'link4')" onMouseOut="HideTip('tt2')">UVMC Converter Example - SC Converter Class</a>.</p><img src="../../../images/UVMC_Converters_SC_UserDefined.png" width="258" height="131"><p>In SC, a separate converter class definition is usually required because most SC transactions do not implement the pack and unpack member functions required by the default converter.&nbsp; To <a href="../../src/connect/sc/uvmc_macros-h.html#UVMC_UTILS" class=LGeneric id=link5 onMouseOver="ShowTip(event, 'tt1', 'link5')" onMouseOut="HideTip('tt1')">UVMC_UTILS</a> macros can be used to quickly define a converter for your transaction type.&nbsp; The macro would expand into the same code you would write directly, so these macros do not suffer from the performance and debug costs associated with other macros such as the <i>`uvm_field</i> macros.</p><p>The UTILS macros also defined <i>operator&lt;&lt;</i> for the output stream (e.g. cout).&nbsp; With this, we can print the transaction contents to any output stream.&nbsp; For example:</p><blockquote><pre>packet p;
// initialize p...
cout &lt;&lt; p;</pre></blockquote><p>This produces output similar to</p><blockquote><pre>'{cmd:2 addr:1fa34f22 data:'{4a, 27, de, a2, 6b, 62, 8d, 1d, 6} }</pre></blockquote><p>Template specializations are chosen automatically by the C+ compiler, so you will not need to explicitly specify your converter type when connecting via <i>uvmc_connect</i>.</p>

<!--START_ND_SUMMARY index=0-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=0 -->

<tr class="SMain"><td colspan=2 class=SEntry><a href="#UVMC_Converter_Example-SC_Converter_Class,Macro-Generated" >UVMC Converter Example - SC Converter Class, Macro-Generated</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>This example demonstrates how to define an external converter for a transaction class using a <a href="../../src/connect/sc/uvmc_macros-h.html#UVMC_UTILS" class=LGeneric id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">UVMC_UTILS</a> macro. </td></tr>
  <!-- index=1 -->

<tr class="SGroup SIndent1"><td class=SEntry><a href="#User_Library" >User Library</a></td><td class=SDescription>This section defines a user transaction class and generic consumer model.</td></tr>
  <!-- index=2 -->

<tr class="SGroup SIndent1"><td class=SEntry><a href="#Conversion_code" >Conversion code</a></td><td class=SDescription>This section defines a converter for our <i>packet</i> transaction type using a <a href="../../src/connect/sc/uvmc_macros-h.html#UVMC_UTILS" class=LGeneric id=link2 onMouseOver="ShowTip(event, 'tt1', 'link2')" onMouseOut="HideTip('tt1')">UVMC_UTILS</a> macro for each class in the <i>packet</i> inheritance hierarchy..</td></tr>
  <!-- index=3 -->

<tr class="SGroup SIndent1"><td class=SEntry><a href="#Testbench_code" >Testbench code</a></td><td class=SDescription>This section defines our testbench environment. </td></tr></table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=1 -->
<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="User_Library" href="../../../uvmc/examples_ovm/converters/sc_converter_macros.cpp">User Library</a></h3><div class=CBody><p>This section defines a user transaction class and generic consumer model.</p><blockquote><pre>namespace user_lib {

  class packet_base
  {
    public:
    enum cmd_t { WRITE=0, READ, NOOP };

    cmd_t cmd;
    unsigned int addr;
    vector&lt;unsigned char&gt; data;
  };

  class packet : public packet_base
  {
    public:
    int extra_int;
  };

}</pre></blockquote></div></div></div>




 <!--CONTENT index=2 -->
<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Conversion_code" href="../../../uvmc/examples_ovm/converters/sc_converter_macros.cpp">Conversion code</a></h3><div class=CBody><p>This section defines a converter for our <i>packet</i> transaction type using a <a href="../../src/connect/sc/uvmc_macros-h.html#UVMC_UTILS" class=LGeneric id=link6 onMouseOver="ShowTip(event, 'tt1', 'link6')" onMouseOut="HideTip('tt1')">UVMC_UTILS</a> macro for each class in the <i>packet</i> inheritance hierarchy..</p><p>The definition of the SC-side template specialization is so regular that a set of convenient macros have been developed to produce a converter class definition for you.&nbsp; You need to invoke one of these macros, depending on the number of fields in your transaction class and whether it inherits from a base class.</p><blockquote><pre>#include &quot;uvmc.h&quot;
using namespace uvmc;
using namespace user_lib;

UVMC_UTILS_3(packet_base,cmd,addr,data)
UVMC_UTILS_EXT_1(packet,packet_base,extra_int)</pre></blockquote></div></div></div>




 <!--CONTENT index=3 -->
<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="Testbench_code" href="../../../uvmc/examples_ovm/converters/sc_converter_macros.cpp">Testbench code</a></h3><div class=CBody><p>This section defines our testbench environment.&nbsp; In the top-level  module, we instantiate the generic consumer model.&nbsp; We also register  the consumer&rsquo;s &lsquo;in&rsquo; export to have a UVMC connection with a lookup  string &lsquo;stimulus&rsquo;.&nbsp; The SV-side will register its producer&rsquo;s &lsquo;out&rsquo;  port with the same &lsquo;stimulus&rsquo; lookup string.&nbsp; UVMC will match these two strings to complete the cross- language connection, i.e. the SV producer&rsquo;s <i>out</i> port will be bound to the SC consumer&rsquo;s <i>in</i> export.</p></div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CGeneric>Generate both a converter specialization and output stream <i>operator&lt;&lt;</i> for the given transaction <i>TYPE</i>.</div></div><div class=CToolTip id="tt2"><div class=CSection>This example demonstrates how to define an external converter class for a given transaction type. </div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>