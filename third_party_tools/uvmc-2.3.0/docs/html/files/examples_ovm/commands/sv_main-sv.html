<html><head><title>UVMC Command API Examples - Common SV Code</title><link rel="stylesheet" type="text/css" href="../../../styles/main.css"><script language=JavaScript src="../../../javascript/main.js"></script></head><body class="FramedContentPage" onLoad="NDOnLoad()"><script language=JavaScript><!--
if (browserType) {document.write("<div class=" + browserType + ">");if (browserVer) {document.write("<div class=" + browserVer + ">"); }}// --></script>

<!--  Generated by Natural Docs, version Development Release 01-12-2008 (1.35 base) -->
<!--  http://www.naturaldocs.org  -->

<!-- saved from url=(0026)http://www.naturaldocs.org --> 








 <!--TOP - START OF CONTENT-->
<div id=Content>


 <!--CONTENT index=0 -->
<div class="CSection"><div class=CTopic id=MainTopic><h1 class=CTitle><a name="UVMC_Command_API_Examples-Common_SV_Code" href="../../../uvmc/examples_ovm/commands/sv_main.sv">UVMC Command API Examples - Common SV Code</a></h1><div class=CBody><p>This code provides an example of waiting for each OVM phase to reach a specified state and then, if the phase is a task phase, controlling its progression by raising and dropping the objection that governs it.</p><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>uvmc_wait_for_phase</td><td class=CDLDescription>block until OVM has reached a certain phase.&nbsp; You may also wait for certain phase state (e.g. started, ended, etc.)</td></tr><tr><td class=CDLEntry>uvmc_raise_objection</td><td class=CDLDescription>prevent a UVM phase from ending</td></tr><tr><td class=CDLEntry>uvmc_drop_objection</td><td class=CDLDescription>remove your objection to ending a UVM phase</td></tr></table><p>See the <a href="../../src/connect/sc/uvmc_commands-h.html#Phasing" class=LGroup id=link13 onMouseOver="ShowTip(event, 'tt8', 'link13')" onMouseOut="HideTip('tt8')">Phasing</a> command descriptions for more details.</p>

<!--START_ND_SUMMARY index=0-->
<div class=Summary><div class=STitle>Contents</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=0 -->

<tr class="SMain"><td class=SEntry><a href="#UVMC_Command_API_Examples-Common_SV_Code" >UVMC Command API Examples - Common SV Code</a></td><td class=SDescription>This code provides an example of waiting for each OVM phase to reach a specified state and then, if the phase is a task phase, controlling its progression by raising and dropping the objection that governs it.</td></tr>
  <!-- index=1 -->

<tr class="SSMethod SMarked"><td class=SEntry><a href="#prod_cfg" id=link1 onMouseOver="ShowTip(event, 'tt1', 'link1')" onMouseOut="HideTip('tt1')">prod_cfg</a></td><td class=SDescription>The <i>prod_cfg</i> class is the configuration object used by our <a href="#producer" class=LClass id=link2 onMouseOver="ShowTip(event, 'tt2', 'link2')" onMouseOut="HideTip('tt2')">producer</a> below. </td></tr>
  <!-- index=2 -->

<tr class="SSMethod"><td class=SEntry><a href="#producer" id=link3 onMouseOver="ShowTip(event, 'tt2', 'link3')" onMouseOut="HideTip('tt2')">producer</a></td><td class=SDescription>A simple SV producer TLM model that generates a configurable number of <i>packet</i> transactions and sends them to its <i>out</i> port for execution. </td></tr>
  <!-- index=8 -->

<tr class="SSMethod SMarked"><td class=SEntry><a href="#producer_ext" id=link4 onMouseOver="ShowTip(event, 'tt3', 'link4')" onMouseOut="HideTip('tt3')">producer_ext</a></td><td class=SDescription>This trivial extension of our <a href="#producer" class=LClass id=link5 onMouseOver="ShowTip(event, 'tt2', 'link5')" onMouseOut="HideTip('tt2')">producer</a> class is used to demonstrate factory overrides from SC using the UVMC Command API.</td></tr>
  <!-- index=9 -->

<tr class="SSMethod"><td class=SEntry><a href="#scoreboard" id=link6 onMouseOver="ShowTip(event, 'tt4', 'link6')" onMouseOut="HideTip('tt4')">scoreboard</a></td><td class=SDescription>A simple SV consumer TLM model that prints received transactions (of type ~tlm_generic_payload) and sends them out its <i>ap</i> analysis port.</td></tr>
  <!-- index=10 -->

<tr class="SSMethod SMarked"><td class=SEntry><a href="#scoreboard_ext" id=link7 onMouseOver="ShowTip(event, 'tt5', 'link7')" onMouseOut="HideTip('tt5')">scoreboard_ext</a></td><td class=SDescription>This trivial extension of our <a href="#scoreboard" class=LClass id=link8 onMouseOver="ShowTip(event, 'tt4', 'link8')" onMouseOut="HideTip('tt4')">scoreboard</a> class is used to demonstrate factory overrides from SC using the UVMC Command API.</td></tr>
  <!-- index=11 -->

<tr class="SSMethod"><td class=SEntry><a href="#env" id=link9 onMouseOver="ShowTip(event, 'tt6', 'link9')" onMouseOut="HideTip('tt6')">env</a></td><td class=SDescription>Our SV <i>env</i> contains an instance of our <a href="#producer" class=LClass id=link10 onMouseOver="ShowTip(event, 'tt2', 'link10')" onMouseOut="HideTip('tt2')">producer</a> and <a href="#scoreboard" class=LClass id=link11 onMouseOver="ShowTip(event, 'tt4', 'link11')" onMouseOut="HideTip('tt4')">scoreboard</a>, above.</td></tr>
  <!-- index=12 -->

<tr class="SModule SMarked"><td class=SEntry><a href="#sv_main" id=link12 onMouseOver="ShowTip(event, 'tt7', 'link12')" onMouseOut="HideTip('tt7')">sv_main</a></td><td class=SDescription>This is the top-level module for the SV side of each command API example.</td></tr></table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=1 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="prod_cfg" href="../../../uvmc/examples_ovm/commands/sv_main.sv">prod_cfg</a></h2><div class=CBody><p>The <i>prod_cfg</i> class is the configuration object used by our <a href="#producer" class=LClass id=link16 onMouseOver="ShowTip(event, 'tt2', 'link16')" onMouseOut="HideTip('tt2')">producer</a> below.&nbsp; The <a href="../../examples/commands/ex_config-cpp.html#UVMC_Command_API_Example-Configuration" class=LSection id=link17 onMouseOver="ShowTip(event, 'tt9', 'link17')" onMouseOut="HideTip('tt9')">UVMC Command API Example - Configuration</a>  demonstrates how to set this configuration from the SC side.</p><p>The configuration object specifies various constraints on randomization of the generated transactions: the number of transactions, the address range, and limits on the size of the data array.</p><p>SV-side conversion is implemented inside the <i>do_pack</i> and <i>do_unpack</i> methods in the configuration object.</p><blockquote><pre>class prod_cfg extends ovm_object;

  `ovm_object_utils(prod_cfg);

  function new(string name=&quot;producer_config_inst&quot;);
    super.new(name);
  endfunction

  int min_addr = 'h00;
  int max_addr = 'hff;
  int min_data_len = 10;
  int max_data_len = 80;
  int max_trans = 5;

  virtual function void do_pack(ovm_packer packer);
    packer.pack_field_int(min_addr,32);
    packer.pack_field_int(max_addr,32);
    packer.pack_field_int(min_data_len,32);
    packer.pack_field_int(max_data_len,32);
    packer.pack_field_int(max_trans,32);
  endfunction

  virtual function void do_unpack(ovm_packer packer);
    min_addr = packer.unpack_field_int(32);
    max_addr = packer.unpack_field_int(32);
    min_data_len = packer.unpack_field_int(32);
    max_data_len = packer.unpack_field_int(32);
    max_trans = packer.unpack_field_int(32);
  endfunction

  function string convert2string();
    return $sformatf(&quot;min_addr:%h max_addr:%h min_data_len:%0d max_data_len:%0d max_trans:%0d&quot;,
    min_addr, max_addr, min_data_len, max_data_len,max_trans);
  endfunction

endclass</pre></blockquote>

<!--START_ND_SUMMARY index=1-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=1 -->

<tr class="SClass"><td colspan=2 class=SEntry><a href="#prod_cfg" id=link14 onMouseOver="ShowTip(event, 'tt1', 'link14')" onMouseOut="HideTip('tt1')">prod_cfg</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>The <i>prod_cfg</i> class is the configuration object used by our <a href="#producer" class=LClass id=link15 onMouseOver="ShowTip(event, 'tt2', 'link15')" onMouseOut="HideTip('tt2')">producer</a> below. </td></tr>

  <!-- HIERARCHY -->
  <tr class="SHierarchy SIndent1 "><td colspan=2 class="SEntry SIndent1">Class Hierarchy</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
      <div class=ClassHierarchy>
        <table border=0 cellspacing=0 cellpadding=0>
          <tr><td><div class=CHParent><div class=CHEntry>ovm_object</div></div></td></tr>
          <tr><td><div class=CHCurrent><div class=CHEntry>prod_cfg</div></div></td></tr>
        </table>
      </div>
  </td></tr>



  <!-- PROTOTYPE -->
  <tr class="SPrototype SIndent1"><td colspan=2 class="SEntry SIndent1">Class Declaration</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class prod_cfg extends ovm_object
  </td></tr></table></blockquote></td></tr>
</table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=2 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="producer" href="../../../uvmc/examples_ovm/commands/sv_main.sv">producer</a></h2><div class=CBody><p>A simple SV producer TLM model that generates a configurable number of <i>packet</i> transactions and sends them to its <i>out</i> port for execution.&nbsp; The transaction is also broadcast to its <i>ap</i> analysis port.</p><p>While trivial in functionality, the model demonstrates use of TLM ports to facilitate external communication.</p><ul><li>Users of the model are not coupled to its internal implementation, using only the provided TLM ports to communicate.</li><li>The model itself does not refer to anything outside its encapsulated implementation.&nbsp; It does not know nor care about what might be receiving the transactions sent via its <i>out</i> and <i>ap</i> ports.</li></ul><p>Because this producer is used for all the Command API examples,  for</p>

<!--START_ND_SUMMARY index=2-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=2 -->

<tr class="SClass"><td colspan=2 class=SEntry><a href="#producer" id=link18 onMouseOver="ShowTip(event, 'tt2', 'link18')" onMouseOut="HideTip('tt2')">producer</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>A simple SV producer TLM model that generates a configurable number of <i>packet</i> transactions and sends them to its <i>out</i> port for execution. </td></tr>

  <!-- HIERARCHY -->
  <tr class="SHierarchy SIndent1 "><td colspan=2 class="SEntry SIndent1">Class Hierarchy</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
      <div class=ClassHierarchy>
        <table border=0 cellspacing=0 cellpadding=0>
          <tr><td><div class=CHParent><div class=CHEntry>ovm_component</div></div></td></tr>
          <tr><td><div class=CHCurrent><div class=CHEntry>producer</div></div></td></tr>
        </table>
      </div>
  </td></tr>



  <!-- PROTOTYPE -->
  <tr class="SPrototype SIndent1"><td colspan=2 class="SEntry SIndent1">Class Declaration</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class producer extends ovm_component
  </td></tr></table></blockquote></td></tr>

  <!-- index=3 -->

<tr class="SGroup SIndent1"><td class=SEntry><a href="#producer.Methods" >Methods</a></td><td class=SDescription></td></tr>
  <!-- index=4 -->

<tr class="SMethod SIndent2"><td class=SEntry><a href="#producer.Phases" >Phases</a></td><td class=SDescription>We implement each phase to simply print a message that the phase has started. </td></tr>
  <!-- index=5 -->

<tr class="SMethod SIndent2 SMarked"><td class=SEntry><a href="#producer.new" >new</a></td><td class=SDescription>Creates a new producer object. </td></tr>
  <!-- index=6 -->

<tr class="SMethod SIndent2"><td class=SEntry><a href="#producer.check_config" >check_config</a></td><td class=SDescription></td></tr>
  <!-- index=7 -->

<tr class="SMethod SIndent2"><td class=SEntry><a href="#producer.run" >run</a></td><td class=SDescription>Produces the configured number of transactions, sending each to its <i>out</i> and <i>ap</i> analysis ports. </td></tr></table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=3 -->
<div class="CGroup"><div class=CTopic><h3 class=CTitle><a name="producer.Methods" href="../../../uvmc/examples_ovm/commands/sv_main.sv">Methods</a></h3></div></div>




 <!--CONTENT index=4 -->
<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="producer.Phases" href="../../../uvmc/examples_ovm/commands/sv_main.sv">Phases</a></h3><div class=CBody><p>We implement each phase to simply print a message that the phase has started.&nbsp; The <a href="ex_phase_control-cpp.html#UVMC_Command_API_Example-Phase_Control" class=LSection id=link19 onMouseOver="ShowTip(event, 'tt10', 'link19')" onMouseOut="HideTip('tt10')">UVMC Command API Example - Phase Control</a> will show that SC can be synchronized to OVM phases and even prevent the task phases from ending.</p><blockquote><pre>virtual function void build();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;BUILD Started&quot;,OVM_NONE);
endfunction

virtual function void connect();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;CONNECT Started&quot;,OVM_NONE);
endfunction

virtual function void end_of_elaboration();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;END_OF_ELABORATION Started&quot;,OVM_NONE);
endfunction

virtual function void start_of_simulation();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;START_OF_SIMULATION Started&quot;,OVM_NONE);
endfunction

virtual function void extract();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;EXTRACT Started&quot;,OVM_LOW);
endfunction

virtual function void check();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;CHECK Started&quot;,OVM_LOW);
endfunction

virtual function void report();
  `ovm_info(&quot;OVMC_PHASING&quot;,&quot;REPORT Started&quot;,OVM_LOW);
endfunction</pre></blockquote></div></div></div>




 <!--CONTENT index=5 -->
<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="producer.new" href="../../../uvmc/examples_ovm/commands/sv_main.sv">new</a></h3><div class=CBody><p>Creates a new producer object.&nbsp; Here, we allocate the <i>out</i> port and <i>ap</i> analysis port.&nbsp; If +PHASING_ON is not on the command line, we disable the OVMC_PHASING messages that are emitted by each phase callback (see above).</p><blockquote><pre>function new(string name, ovm_component parent=null);
   super.new(name,parent);
   out = new(&quot;out&quot;, this);
   ap = new(&quot;ap&quot;, this);
   //if (!$test$plusargs(&quot;PHASING_ON&quot;))
    // set_report_id_action(&quot;OVMC_PHASING&quot;,OVM_NO_ACTION);
endfunction : new


// Function: check_config
//
// Enabled only during the &lt;UVMC Command API Example - Configuration&gt;,
// the ~check_config~ function gets the configuration parameters
// that the SC side should have set. It produces ERRORs in cases
// where a get was not successful.

// (begin inline source)
prod_cfg cfg = new();

function void check_config();

  int i;
  string str;
  ovm_object obj;

    if (!get_config_int(&quot;some_int&quot;,i))
      `ovm_error(&quot;NO_INT_CONFIG&quot;,{&quot;No configuration for field 'some_int'&quot;,
         &quot; found at context '&quot;,get_full_name(),&quot;'&quot;})
    else
      `ovm_info(&quot;INT_CONFIG&quot;,
         $sformatf(&quot;Config for field 'some_int' at context '%s' has value %0h&quot;,
         get_full_name(),i),OVM_NONE)


    if (!get_config_string(&quot;some_string&quot;,str))
      `ovm_error(&quot;NO_STRING_CONFIG&quot;,{&quot;No configuration for field 'some_string'&quot;,
         &quot; found at context '&quot;,get_full_name(),&quot;'&quot;})
    else
      `ovm_info(&quot;STRING_CONFIG&quot;,
         {&quot;Config for field 'message' at context '&quot;, get_full_name(),
         &quot;' has value '&quot;, str,&quot;'&quot;},OVM_NONE)

    if (!get_config_object(&quot;config&quot;,obj,0))
      `ovm_error(&quot;NO_OBJECT_CONFIG&quot;,{&quot;No configuration for field 'config'&quot;,
         &quot; found at context '&quot;,get_full_name(),&quot;'&quot;})
    else begin
       prod_cfg c;
       if (!$cast(c,obj))
         `ovm_error(&quot;BAD_CONFIG_TYPE&quot;,
            {&quot;Object set for configuration field 'config' at context '&quot;,
            get_full_name(),&quot;' is not a prod_cfg type&quot;})
       else begin
         cfg = c;
         `ovm_info(&quot;OBJECT_CONFIG&quot;,
            {&quot;Config for field 'config' at context '&quot;,get_full_name(),
            &quot;' has value '&quot;, cfg.convert2string(),&quot;'&quot;},OVM_NONE)
       end
    end

endfunction</pre></blockquote></div></div></div>




 <!--CONTENT index=6 -->
<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="producer.check_config" href="../../../uvmc/examples_ovm/commands/sv_main.sv">check_config</a></h3><div class=CBody><table border=0 cellspacing=0 cellpadding=0 class=CDescriptionList><tr><td class=CDLEntry>Enabled only during the &lt;UVMC Command API Example</td><td class=CDLDescription>Configuration&gt;, the <i>check_config</i> function gets the configuration parameters that the SC side should have set.&nbsp; It produces ERRORs in cases where a get was not successful.</td></tr></table></div></div></div>




 <!--CONTENT index=7 -->
<div class="CMethod"><div class=CTopic><h3 class=CTitle><a name="producer.run" href="../../../uvmc/examples_ovm/commands/sv_main.sv">run</a></h3><div class=CBody><p>Produces the configured number of transactions, sending each to its <i>out</i> and <i>ap</i> analysis ports.&nbsp; A <a href="#prod_cfg" class=LClass id=link20 onMouseOver="ShowTip(event, 'tt1', 'link20')" onMouseOut="HideTip('tt1')">prod_cfg</a> configuration object governs how many transactions are produced and constrains the address range and data array length during randomization.&nbsp; Upon return from sending the last transaction, the producer drops its objection to ending the run phase, thus allowing simulation to proceed to the next phase.</p><blockquote><pre>   virtual task run();

     bit enable_config_check = $test$plusargs(&quot;CONFIG_ON&quot;);
     bit enable_stimulus = $test$plusargs(&quot;TRANS_ON&quot;);

     if (enable_config_check)
       check_config();

     if (enable_stimulus) begin

       `ovm_info(&quot;OVMC_PHASING&quot;,&quot;RUN Started&quot;,OVM_LOW);

       if (cfg != null) begin

         ovm_test_done.raise_objection(this);

         for (int i = 1; i &lt;= cfg.max_trans; i++) begin

           packet pkt = packet::type_id::create(&quot;pkt&quot;,this);

           pkt.cmd = i;

           if (!pkt.randomize() with {
              addr inside { [cfg.min_addr:cfg.max_addr] };
              data.size() inside { [cfg.min_data_len:cfg.max_data_len] }; })
             `ovm_error(&quot;RAND_FAILED&quot;,  &quot;Randomization of tlm_gp failed&quot;)

           $display();
           `ovm_info(&quot;PRODUCER/SEND_PKT&quot;,
              $sformatf(&quot;SV producer sending packet #%0d\n  %s&quot;,i,
                        pkt.sprint(ovm_default_line_printer)),OVM_MEDIUM)

           ap.write(pkt);
           out.put(pkt);
         end

         ovm_test_done.drop_objection(this);

         `ovm_info(&quot;PRODUCER/DONE&quot;,&quot;Finished with stimulus&quot;,OVM_LOW)

       end

     end // enable_stimulues

     else begin
       global_stop_request();
     end

   endtask

endclass</pre></blockquote></div></div></div>




 <!--CONTENT index=8 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="producer_ext" href="../../../uvmc/examples_ovm/commands/sv_main.sv">producer_ext</a></h2><div class=CBody><p>This trivial extension of our <a href="#producer" class=LClass id=link24 onMouseOver="ShowTip(event, 'tt2', 'link24')" onMouseOut="HideTip('tt2')">producer</a> class is used to demonstrate factory overrides from SC using the UVMC Command API.</p><blockquote><pre>class producer_ext extends producer;

   `ovm_component_utils(producer_ext)

   function new(string name, ovm_component parent=null);
      super.new(name,parent);
      `ovm_info(&quot;PRODUCER_EXTENSION&quot;,&quot;Derived producer created!&quot;,OVM_NONE);
   endfunction

endclass</pre></blockquote>

<!--START_ND_SUMMARY index=8-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=8 -->

<tr class="SClass"><td colspan=2 class=SEntry><a href="#producer_ext" id=link22 onMouseOver="ShowTip(event, 'tt3', 'link22')" onMouseOut="HideTip('tt3')">producer_ext</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>This trivial extension of our <a href="#producer" class=LClass id=link23 onMouseOver="ShowTip(event, 'tt2', 'link23')" onMouseOut="HideTip('tt2')">producer</a> class is used to demonstrate factory overrides from SC using the UVMC Command API.</td></tr>

  <!-- HIERARCHY -->
  <tr class="SHierarchy SIndent1 "><td colspan=2 class="SEntry SIndent1">Class Hierarchy</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
      <div class=ClassHierarchy>
        <table border=0 cellspacing=0 cellpadding=0>
          <tr><td><div class=CHParent><div class=CHEntry>ovm_component</div></div></td></tr>
          <tr><td><div class=CHParent><div class=CHEntry><a href="#producer" class=LClass id=link21 onMouseOver="ShowTip(event, 'tt2', 'link21')" onMouseOut="HideTip('tt2')">producer</a></div></div></td></tr>
          <tr><td><div class=CHCurrent><div class=CHEntry>producer_ext</div></div></td></tr>
        </table>
      </div>
  </td></tr>



  <!-- PROTOTYPE -->
  <tr class="SPrototype SIndent1"><td colspan=2 class="SEntry SIndent1">Class Declaration</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class producer_ext extends producer
  </td></tr></table></blockquote></td></tr>
</table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=9 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="scoreboard" href="../../../uvmc/examples_ovm/commands/sv_main.sv">scoreboard</a></h2><div class=CBody><p>A simple SV consumer TLM model that prints received transactions (of type ~tlm_generic_payload) and sends them out its <i>ap</i> analysis port.</p><p>While trivial in functionality, the model demonstrates use of TLM ports to facilitate external communication.</p><ul><li>Users of the model are not coupled to its internal implementation, using only the provided TLM exports to communicate.</li><li>The model itself does not refer to anything outside its encapsulated implementation.&nbsp; It does not know nor care about what might be driving its analysis exports.</li></ul>

<!--START_ND_SUMMARY index=9-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=9 -->

<tr class="SClass"><td colspan=2 class=SEntry><a href="#scoreboard" id=link25 onMouseOver="ShowTip(event, 'tt4', 'link25')" onMouseOut="HideTip('tt4')">scoreboard</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>A simple SV consumer TLM model that prints received transactions (of type ~tlm_generic_payload) and sends them out its <i>ap</i> analysis port.</td></tr>

  <!-- HIERARCHY -->
  <tr class="SHierarchy SIndent1 "><td colspan=2 class="SEntry SIndent1">Class Hierarchy</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
      <div class=ClassHierarchy>
        <table border=0 cellspacing=0 cellpadding=0>
          <tr><td><div class=CHParent><div class=CHEntry>ovm_component</div></div></td></tr>
          <tr><td><div class=CHCurrent><div class=CHEntry>scoreboard</div></div></td></tr>
        </table>
      </div>
  </td></tr>



  <!-- PROTOTYPE -->
  <tr class="SPrototype SIndent1"><td colspan=2 class="SEntry SIndent1">Class Declaration</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class scoreboard extends ovm_component
  </td></tr></table></blockquote></td></tr>
</table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=10 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="scoreboard_ext" href="../../../uvmc/examples_ovm/commands/sv_main.sv">scoreboard_ext</a></h2><div class=CBody><p>This trivial extension of our <a href="#scoreboard" class=LClass id=link29 onMouseOver="ShowTip(event, 'tt4', 'link29')" onMouseOut="HideTip('tt4')">scoreboard</a> class is used to demonstrate factory overrides from SC using the UVMC Command API.</p><blockquote><pre>class scoreboard_ext extends scoreboard;

   `ovm_component_utils(scoreboard_ext)

   function new(string name, ovm_component parent=null);
      super.new(name,parent);
      `ovm_info(&quot;SCOREBOARD_EXTENSION&quot;,&quot;Derived scoreboard created!&quot;,OVM_NONE);
   endfunction

endclass</pre></blockquote>

<!--START_ND_SUMMARY index=10-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=10 -->

<tr class="SClass"><td colspan=2 class=SEntry><a href="#scoreboard_ext" id=link27 onMouseOver="ShowTip(event, 'tt5', 'link27')" onMouseOut="HideTip('tt5')">scoreboard_ext</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>This trivial extension of our <a href="#scoreboard" class=LClass id=link28 onMouseOver="ShowTip(event, 'tt4', 'link28')" onMouseOut="HideTip('tt4')">scoreboard</a> class is used to demonstrate factory overrides from SC using the UVMC Command API.</td></tr>

  <!-- HIERARCHY -->
  <tr class="SHierarchy SIndent1 "><td colspan=2 class="SEntry SIndent1">Class Hierarchy</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
      <div class=ClassHierarchy>
        <table border=0 cellspacing=0 cellpadding=0>
          <tr><td><div class=CHParent><div class=CHEntry>ovm_component</div></div></td></tr>
          <tr><td><div class=CHParent><div class=CHEntry><a href="#scoreboard" class=LClass id=link26 onMouseOver="ShowTip(event, 'tt4', 'link26')" onMouseOut="HideTip('tt4')">scoreboard</a></div></div></td></tr>
          <tr><td><div class=CHCurrent><div class=CHEntry>scoreboard_ext</div></div></td></tr>
        </table>
      </div>
  </td></tr>



  <!-- PROTOTYPE -->
  <tr class="SPrototype SIndent1"><td colspan=2 class="SEntry SIndent1">Class Declaration</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class scoreboard_ext extends scoreboard
  </td></tr></table></blockquote></td></tr>
</table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=11 -->
<div class="CClass"><div class=CTopic><h2 class=CTitle><a name="env" href="../../../uvmc/examples_ovm/commands/sv_main.sv">env</a></h2><div class=CBody><p>Our SV <i>env</i> contains an instance of our <a href="#producer" class=LClass id=link33 onMouseOver="ShowTip(event, 'tt2', 'link33')" onMouseOut="HideTip('tt2')">producer</a> and <a href="#scoreboard" class=LClass id=link34 onMouseOver="ShowTip(event, 'tt4', 'link34')" onMouseOut="HideTip('tt4')">scoreboard</a>, above.</p><blockquote><pre>class env extends ovm_env;

   `ovm_component_utils(env)

   ovm_blocking_put_port #(packet) prod_out;
   ovm_analysis_export #(packet) sb_actual_in;

   producer prod;
   scoreboard sb;

   function new(string name, ovm_component parent=null);
     super.new(name,parent);
     prod_out = new(&quot;prod_out&quot;,this);
     sb_actual_in = new(&quot;sb_actual_in&quot;,this);
   endfunction

   function void build();
     prod = producer::type_id::create(&quot;prod&quot;,this);
     sb = scoreboard::type_id::create(&quot;sb&quot;,this);
   endfunction

   function void connect();
     prod.ap.connect(sb.expect_in);
     prod.out.connect(prod_out);
     sb_actual_in.connect(sb.actual_in);
   endfunction

endclass</pre></blockquote>

<!--START_ND_SUMMARY index=11-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=11 -->

<tr class="SClass"><td colspan=2 class=SEntry><a href="#env" id=link30 onMouseOver="ShowTip(event, 'tt6', 'link30')" onMouseOut="HideTip('tt6')">env</a></td></tr>
<tr class=SMain><td colspan=2 class=SWideDescription>Our SV <i>env</i> contains an instance of our <a href="#producer" class=LClass id=link31 onMouseOver="ShowTip(event, 'tt2', 'link31')" onMouseOut="HideTip('tt2')">producer</a> and <a href="#scoreboard" class=LClass id=link32 onMouseOver="ShowTip(event, 'tt4', 'link32')" onMouseOut="HideTip('tt4')">scoreboard</a>, above.</td></tr>

  <!-- HIERARCHY -->
  <tr class="SHierarchy SIndent1 "><td colspan=2 class="SEntry SIndent1">Class Hierarchy</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
      <div class=ClassHierarchy>
        <table border=0 cellspacing=0 cellpadding=0>
          <tr><td><div class=CHParent><div class=CHEntry>ovm_env</div></div></td></tr>
          <tr><td><div class=CHCurrent><div class=CHEntry>env</div></div></td></tr>
        </table>
      </div>
  </td></tr>



  <!-- PROTOTYPE -->
  <tr class="SPrototype SIndent1"><td colspan=2 class="SEntry SIndent1">Class Declaration</td></tr>
  <tr class="SPrototype SIndent1"><td colspan=2 class=SDescription>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class env extends ovm_env
  </td></tr></table></blockquote></td></tr>
</table></div></div><!--END_ND_SUMMARY-->
</div></div></div>




 <!--CONTENT index=12 -->
<div class="CModule"><div class=CTopic><h2 class=CTitle><a name="sv_main" href="../../../uvmc/examples_ovm/commands/sv_main.sv">sv_main</a></h2>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>module sv_main
  </td></tr></table></blockquote><div class=CBody><p>This is the top-level module for the SV side of each command API example.</p><p>This top-level SV module does the following</p><ul><li>Initializes the UVMC Command API layer by calling <i>uvmc_init</i>.&nbsp; This is required.&nbsp; You can also relegate the init call to a separate module that is compiled separately or on the same command line as this file.</li><li>Registers the env&rsquo;s <i>prod_out</i> and <i>sb_actual_in</i> ports for UVMC communication.</li><li>Calls <i>run_test</i> to start the SV portion of the simulation.</li></ul><p>We could have registered the UVMC connections in the <a href="#env" class=LClass id=link36 onMouseOver="ShowTip(event, 'tt6', 'link36')" onMouseOut="HideTip('tt6')">env&rsquo;s</a> <i>connect</i> method, but that would have forced the <i>env</i> to only work with UVMC.&nbsp; If you prefer to relagate UVMC registration to the <a href="#env" class=LClass id=link37 onMouseOver="ShowTip(event, 'tt6', 'link37')" onMouseOut="HideTip('tt6')">env</a> or lower, you should not mix it in with the <i>env&rsquo;s</i> main purpose.&nbsp; Instead, try to add the UVMC connection code to a simple extension/wrapper around your original model.&nbsp; This technique is demonstrated in &lt;SC to SV Connection-SC side).</p><blockquote><pre>module sv_main;

  import ovmc_pkg::*;

  env e;

  initial begin
    e = new(&quot;e&quot;);

    uvmc_init();

    // In OVM, build-phase can be started before SC-side gets to wait
    // on UVM_PHASE_STARTED, causing an error. This #0 delays the
    // run_test() enough to allow SC-side to issue a wait for
    // the build phase to be started. UVM doesn't have this problem
    // because UVM inserts delta delays between each phase transition.
    #0;

    $timeformat(-9,0,&quot; ns&quot;);

    // actual path - SC-side consumer to SV-side scoreboard
    uvmc_tlm1 #(packet)::connect(e.prod_out,&quot;foo&quot;);
    uvmc_tlm1 #(packet)::connect(e.sb_actual_in,&quot;bar&quot;);

    run_test();

  end

endmodule</pre></blockquote>

<!--START_ND_SUMMARY index=12-->
<div class=Summary><div class=STitle>Summary</div><div class=SBorder><table border=0 cellspacing=0 cellpadding=0 class=STable>
  <!-- index=12 -->

<tr class="SModule"><td class=SEntry><a href="#sv_main" id=link35 onMouseOver="ShowTip(event, 'tt7', 'link35')" onMouseOut="HideTip('tt7')">sv_main</a></td><td class=SDescription>This is the top-level module for the SV side of each command API example.</td></tr></table></div></div><!--END_ND_SUMMARY-->
</div></div></div>

</div><!--Content-->



<!--START_ND_TOOLTIPS-->
<div class=CToolTip id="tt1"><div class=CClass>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class prod_cfg extends ovm_object
  </td></tr></table></blockquote>The <i>prod_cfg</i> class is the configuration object used by our producer below. </div></div><div class=CToolTip id="tt2"><div class=CClass>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class producer extends ovm_component
  </td></tr></table></blockquote>A simple SV producer TLM model that generates a configurable number of <i>packet</i> transactions and sends them to its <i>out</i> port for execution. </div></div><div class=CToolTip id="tt3"><div class=CClass>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class producer_ext extends producer
  </td></tr></table></blockquote>This trivial extension of our producer class is used to demonstrate factory overrides from SC using the UVMC Command API.</div></div><div class=CToolTip id="tt4"><div class=CClass>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class scoreboard extends ovm_component
  </td></tr></table></blockquote>A simple SV consumer TLM model that prints received transactions (of type ~tlm_generic_payload) and sends them out its <i>ap</i> analysis port.</div></div><div class=CToolTip id="tt5"><div class=CClass>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class scoreboard_ext extends scoreboard
  </td></tr></table></blockquote>This trivial extension of our scoreboard class is used to demonstrate factory overrides from SC using the UVMC Command API.</div></div><div class=CToolTip id="tt6"><div class=CClass>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>class env extends ovm_env
  </td></tr></table></blockquote>Our SV <i>env</i> contains an instance of our producer and scoreboard, above.</div></div><div class=CToolTip id="tt7"><div class=CModule>
    <blockquote><table border=0 cellspacing=0 cellpadding=0 class=Prototype><tr><td>module sv_main
  </td></tr></table></blockquote>This is the top-level module for the SV side of each command API example.</div></div><div class=CToolTip id="tt8"><div class=CGroup>An API that provides access UVM&rsquo;s phase state and the objection objects used to control phase progression.</div></div><div class=CToolTip id="tt9"><div class=CSection>This example demonstrates usage the set_config and get_config portion of the UVMC Command API.</div></div><div class=CToolTip id="tt10"><div class=CSection>This code provides an example of waiting for each UVM phase to reach a specified state and then, if the phase is a task phase, controlling its progression by raising and dropping the objection that governs it.</div></div><!--END_ND_TOOLTIPS-->

<script language=JavaScript><!--
if (browserType) {if (browserVer) {document.write("</div>"); }document.write("</div>");}// --></script></body></html>